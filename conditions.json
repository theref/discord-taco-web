{
  "version": "1.0.0",
  "condition": {
    "conditionType": "compound",
    "operator": "and",
    "operands": [
      {
        "conditionType": "compound",
        "operator": "or",
        "operands": [
          {
            "message": ":timestamp:discordPayload",
            "signature": ":signature",
            "verifyingKey": "db55ffb861ef97174c5da1563491ae39444851930aca9111039d875ca7812c23",
            "curve": "Ed25519",
            "conditionType": "ecdsa"
          },
          {
            "message": ":timestamp:discordPayload",
            "signature": ":signature",
            "verifyingKey": "845e32f597ba70fba3586cbd0acbed78b40e01df4b940d01f7a74ee1fd7a43b8",
            "curve": "Ed25519",
            "conditionType": "ecdsa"
          },
          {
            "message": ":timestamp:discordPayload",
            "signature": ":signature",
            "verifyingKey": "d13fe84b134026fc0b26667ea3880779ad1b5dec2170561136929b479ed68800",
            "curve": "Ed25519",
            "conditionType": "ecdsa"
          }
        ]
      },
      {
        "conditionType": "sequential",
        "conditionVariables": [
          {
            "varName": "senderId",
            "condition": {
              "conditionType": "json",
              "data": ":discordPayload",
              "query": "$.member.user.id",
              "returnValueTest": {
                "comparator": ">",
                "value": 0
              }
            }
          },
          {
            "varName": "minAccountCreationTime",
            "condition": {
              "chain": 84532,
              "method": "blocktime",
              "returnValueTest": {
                "comparator": ">",
                "value": 0
              },
              "conditionType": "time"
            },
            "operations": [
              {
                "operation": "*=",
                "value": 1000
              },
              {
                "operation": "-=",
                "value": 604800000
              }
            ]
          },
          {
            "varName": "validateAccountAge",
            "condition": {
              "conditionType": "context-variable",
              "contextVariable": ":senderId",
              "returnValueTest": {
                "operations": [
                  {
                    "operation": "int"
                  },
                  {
                    "operation": "/=",
                    "value": 4194304
                  },
                  {
                    "operation": "+=",
                    "value": 1420070400000
                  }
                ],
                "comparator": "<",
                "value": ":minAccountCreationTime"
              }
            }
          },
          {
            "varName": "senderSalt",
            "condition": {
              "conditionType": "context-variable",
              "contextVariable": ":senderId",
              "returnValueTest": {
                "comparator": ">",
                "value": 0
              }
            },
            "operations": [
              {
                "operation": "str"
              },
              {
                "operation": "+=",
                "value": "|Discord|Collab.Land"
              },
              {
                "operation": "keccak"
              }
            ]
          },
          {
            "varName": "senderAA",
            "condition": {
              "chain": 84532,
              "method": "computeAddress",
              "parameters": [
                "0x210ffc0da7f274285c4d6116aaef8420ecb9054faced33862197d6b951cb32f5",
                ":senderSalt"
              ],
              "contractAddress": "0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",
              "functionAbi": {
                "name": "computeAddress",
                "type": "function",
                "inputs": [
                  {
                    "name": "_bytecodeHash",
                    "type": "bytes32",
                    "internalType": "bytes32"
                  },
                  {
                    "name": "_salt",
                    "type": "bytes32",
                    "internalType": "bytes32"
                  }
                ],
                "outputs": [
                  {
                    "name": "",
                    "type": "address",
                    "internalType": "address"
                  }
                ],
                "stateMutability": "view"
              },
              "returnValueTest": {
                "comparator": "!=",
                "value": "0x0000000000000000000000000000000000000000"
              },
              "conditionType": "contract"
            }
          },
          {
            "varName": "validateSender",
            "condition": {
              "signingObjectContextVar": ":signingConditionObject",
              "attributeName": "sender",
              "conditionType": "signing-attribute",
              "returnValueTest": {
                "comparator": "==",
                "value": ":senderAA"
              }
            }
          }
        ]
      },
      {
        "conditionType": "sequential",
        "conditionVariables": [
          {
            "varName": "amountUSDC",
            "condition": {
              "conditionType": "json",
              "data": ":discordPayload",
              "query": "$.data.options[0].options[?(@.name == \"amount\")].value",
              "returnValueTest": {
                "comparator": ">=",
                "value": 0.5,
                "operations": [
                  {
                    "operation": "float"
                  }
                ]
              }
            },
            "operations": [
              {
                "operation": "toTokenBaseUnits",
                "value": 6
              }
            ]
          },
          {
            "varName": "recipientSalt",
            "condition": {
              "conditionType": "json",
              "data": ":discordPayload",
              "query": "$.data.options[0].options[?(@.name == \"receiver\")].value",
              "returnValueTest": {
                "comparator": ">",
                "value": 0
              }
            },
            "operations": [
              {
                "operation": "str"
              },
              {
                "operation": "+=",
                "value": "|Discord|Collab.Land"
              },
              {
                "operation": "keccak"
              }
            ]
          },
          {
            "varName": "recipientAA",
            "condition": {
              "chain": 84532,
              "method": "computeAddress",
              "parameters": [
                "0x210ffc0da7f274285c4d6116aaef8420ecb9054faced33862197d6b951cb32f5",
                ":recipientSalt"
              ],
              "contractAddress": "0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",
              "functionAbi": {
                "name": "computeAddress",
                "type": "function",
                "inputs": [
                  {
                    "name": "_bytecodeHash",
                    "type": "bytes32",
                    "internalType": "bytes32"
                  },
                  {
                    "name": "_salt",
                    "type": "bytes32",
                    "internalType": "bytes32"
                  }
                ],
                "outputs": [
                  {
                    "name": "",
                    "type": "address",
                    "internalType": "address"
                  }
                ],
                "stateMutability": "view"
              },
              "returnValueTest": {
                "comparator": "!=",
                "value": "0x0000000000000000000000000000000000000000"
              },
              "conditionType": "contract"
            }
          },
          {
            "varName": "validateCalldata",
            "condition": {
              "signingObjectContextVar": ":signingConditionObject",
              "attributeName": "call_data",
              "conditionType": "signing-abi-attribute",
              "abiValidation": {
                "allowedAbiCalls": {
                  "execute((address,uint256,bytes))": [
                    {
                      "parameterIndex": 0,
                      "indexWithinTuple": 0,
                      "returnValueTest": {
                        "comparator": "==",
                        "value": "0x036CbD53842c5426634e7929541eC2318f3dCF7e"
                      }
                    },
                    {
                      "parameterIndex": 0,
                      "indexWithinTuple": 1,
                      "returnValueTest": {
                        "comparator": "==",
                        "value": 0
                      }
                    },
                    {
                      "parameterIndex": 0,
                      "indexWithinTuple": 2,
                      "nestedAbiValidation": {
                        "allowedAbiCalls": {
                          "transfer(address,uint256)": [
                            {
                              "parameterIndex": 0,
                              "returnValueTest": {
                                "comparator": "==",
                                "value": ":recipientAA"
                              }
                            },
                            {
                              "parameterIndex": 1,
                              "returnValueTest": {
                                "comparator": "==",
                                "value": ":amountUSDC"
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        ]
      }
    ]
  }
}
