{
  "version": "1.0.0",
  "condition": {
    "conditionType": "compound",
    "operator": "and",
    "operands": [
      {
        "message": ":timestamp:discordPayload",
        "signature": ":signature",
        "verifyingKey": "4e271990cdfb318e0c51af2bc71bee5228c599484bc8aa7503f61287e8be1650",
        "curve": "Ed25519",
        "conditionType": "ecdsa"
      },
      {
        "conditionType": "sequential",
        "conditionVariables": [
          {
            "varName": "senderId",
            "condition": {
              "conditionType": "json",
              "data": ":discordPayload",
              "query": "$.member.user.id",
              "returnValueTest": {
                "comparator": ">",
                "value": 0
              }
            }
          },
          {
            "varName": "minAccountCreationTime",
            "condition": {
              "chain": 8453,
              "method": "blocktime",
              "returnValueTest": {
                "comparator": ">",
                "value": 0
              },
              "conditionType": "time"
            },
            "operations": [
              {
                "operation": "*=",
                "value": 1000
              },
              {
                "operation": "-=",
                "value": 15768000000
              }
            ]
          },
          {
            "varName": "validateAccountAge",
            "condition": {
              "conditionType": "context-variable",
              "contextVariable": ":senderId",
              "returnValueTest": {
                "operations": [
                  {
                    "operation": "int"
                  },
                  {
                    "operation": "/=",
                    "value": 4194304
                  },
                  {
                    "operation": "+=",
                    "value": 1420070400000
                  }
                ],
                "comparator": "<",
                "value": ":minAccountCreationTime"
              }
            }
          },
          {
            "varName": "senderSalt",
            "condition": {
              "conditionType": "context-variable",
              "contextVariable": ":senderId",
              "returnValueTest": {
                "comparator": ">",
                "value": 0
              }
            },
            "operations": [
              {
                "operation": "str"
              },
              {
                "operation": "+=",
                "value": "|Discord|Collab.Land"
              },
              {
                "operation": "keccak"
              }
            ]
          },
          {
            "varName": "senderAA",
            "condition": {
              "chain": 8453,
              "method": "computeAddress",
              "parameters": [
                "0x365a7db7cf8b7bc3eb36e43cf0c38ca8f1caab2c4afbe4f8f1e4fc5af110e0b4",
                ":senderSalt"
              ],
              "contractAddress": "0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",
              "functionAbi": {
                "name": "computeAddress",
                "type": "function",
                "inputs": [
                  {
                    "name": "_bytecodeHash",
                    "type": "bytes32",
                    "internalType": "bytes32"
                  },
                  {
                    "name": "_salt",
                    "type": "bytes32",
                    "internalType": "bytes32"
                  }
                ],
                "outputs": [
                  {
                    "name": "",
                    "type": "address",
                    "internalType": "address"
                  }
                ],
                "stateMutability": "view"
              },
              "returnValueTest": {
                "comparator": "!=",
                "value": "0x0000000000000000000000000000000000000000"
              },
              "conditionType": "contract"
            }
          },
          {
            "varName": "validateSender",
            "condition": {
              "signingObjectContextVar": ":signingConditionObject",
              "attributeName": "sender",
              "conditionType": "signing-attribute",
              "returnValueTest": {
                "comparator": "==",
                "value": ":senderAA"
              }
            }
          }
        ]
      },
      {
        "conditionType": "compound",
        "operator": "or",
        "operands": [
          {
            "conditionType": "sequential",
            "conditionVariables": [
              {
                "varName": "amountUSDC",
                "condition": {
                  "conditionType": "json",
                  "data": ":discordPayload",
                  "query": "$.data.options[0].options[?(@.name == \"amount\")].value",
                  "returnValueTest": {
                    "comparator": ">=",
                    "value": 0.25,
                    "operations": [
                      {
                        "operation": "float"
                      }
                    ]
                  }
                },
                "operations": [
                  {
                    "operation": "toTokenBaseUnits",
                    "value": 6
                  }
                ]
              },
              {
                "varName": "recipientSalt",
                "condition": {
                  "conditionType": "json",
                  "data": ":discordPayload",
                  "query": "$.data.options[0].options[?(@.name == \"receiver\")].value",
                  "returnValueTest": {
                    "comparator": ">",
                    "value": 0
                  }
                },
                "operations": [
                  {
                    "operation": "str"
                  },
                  {
                    "operation": "+=",
                    "value": "|Discord|Collab.Land"
                  },
                  {
                    "operation": "keccak"
                  }
                ]
              },
              {
                "varName": "recipientAA",
                "condition": {
                  "chain": 8453,
                  "method": "computeAddress",
                  "parameters": [
                    "0x365a7db7cf8b7bc3eb36e43cf0c38ca8f1caab2c4afbe4f8f1e4fc5af110e0b4",
                    ":recipientSalt"
                  ],
                  "contractAddress": "0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",
                  "functionAbi": {
                    "name": "computeAddress",
                    "type": "function",
                    "inputs": [
                      {
                        "name": "_bytecodeHash",
                        "type": "bytes32",
                        "internalType": "bytes32"
                      },
                      {
                        "name": "_salt",
                        "type": "bytes32",
                        "internalType": "bytes32"
                      }
                    ],
                    "outputs": [
                      {
                        "name": "",
                        "type": "address",
                        "internalType": "address"
                      }
                    ],
                    "stateMutability": "view"
                  },
                  "returnValueTest": {
                    "comparator": "!=",
                    "value": "0x0000000000000000000000000000000000000000"
                  },
                  "conditionType": "contract"
                }
              },
              {
                "varName": "validateCalldata",
                "condition": {
                  "signingObjectContextVar": ":signingConditionObject",
                  "attributeName": "call_data",
                  "conditionType": "signing-abi-attribute",
                  "abiValidation": {
                    "allowedAbiCalls": {
                      "execute((address,uint256,bytes))": [
                        {
                          "parameterIndex": 0,
                          "indexWithinTuple": 0,
                          "returnValueTest": {
                            "comparator": "==",
                            "value": "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"
                          }
                        },
                        {
                          "parameterIndex": 0,
                          "indexWithinTuple": 1,
                          "returnValueTest": {
                            "comparator": "==",
                            "value": 0
                          }
                        },
                        {
                          "parameterIndex": 0,
                          "indexWithinTuple": 2,
                          "nestedAbiValidation": {
                            "allowedAbiCalls": {
                              "transfer(address,uint256)": [
                                {
                                  "parameterIndex": 0,
                                  "returnValueTest": {
                                    "comparator": "==",
                                    "value": ":recipientAA"
                                  }
                                },
                                {
                                  "parameterIndex": 1,
                                  "returnValueTest": {
                                    "comparator": "==",
                                    "value": ":amountUSDC"
                                  }
                                }
                              ]
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            ]
          },
          {
            "conditionType": "sequential",
            "conditionVariables": [
              {
                "varName": "amountUSDCSend",
                "condition": {
                  "conditionType": "json",
                  "data": ":discordPayload",
                  "query": "$.data.options[0].options[?(@.name == \"amount\")].value",
                  "returnValueTest": {
                    "comparator": ">=",
                    "value": 0.25,
                    "operations": [
                      {
                        "operation": "float"
                      }
                    ]
                  }
                },
                "operations": [
                  {
                    "operation": "toTokenBaseUnits",
                    "value": 6
                  }
                ]
              },
              {
                "varName": "recipientDirect",
                "condition": {
                  "conditionType": "json",
                  "data": ":discordPayload",
                  "query": "$.data.options[0].options[?(@.name == \"receiver\")].value",
                  "returnValueTest": {
                    "comparator": ">",
                    "value": 0
                  }
                }
              },
              {
                "varName": "validateCalldataSend",
                "condition": {
                  "signingObjectContextVar": ":signingConditionObject",
                  "attributeName": "call_data",
                  "conditionType": "signing-abi-attribute",
                  "abiValidation": {
                    "allowedAbiCalls": {
                      "execute((address,uint256,bytes))": [
                        {
                          "parameterIndex": 0,
                          "indexWithinTuple": 0,
                          "returnValueTest": {
                            "comparator": "==",
                            "value": "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"
                          }
                        },
                        {
                          "parameterIndex": 0,
                          "indexWithinTuple": 1,
                          "returnValueTest": {
                            "comparator": "==",
                            "value": 0
                          }
                        },
                        {
                          "parameterIndex": 0,
                          "indexWithinTuple": 2,
                          "nestedAbiValidation": {
                            "allowedAbiCalls": {
                              "transfer(address,uint256)": [
                                {
                                  "parameterIndex": 0,
                                  "returnValueTest": {
                                    "comparator": "==",
                                    "value": ":recipientDirect"
                                  }
                                },
                                {
                                  "parameterIndex": 1,
                                  "returnValueTest": {
                                    "comparator": "==",
                                    "value": ":amountUSDCSend"
                                  }
                                }
                              ]
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        ]
      }
    ]
  }
}
